<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Detalle del Vehículo</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />
  <!-- Tu hoja de estilos principal -->
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/dashboard">Taller Admin</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
  
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <!-- Vehículo: Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle active"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-car-front-fill"></i>
            </a>
            <ul class="dropdown-menu">
              <!-- Ajusta las rutas según tu proyecto -->
              <li>
                <a class="dropdown-item" href="/detallevehiculoTodos.html">Todos</a>
              </li>
              <li>
                <a class="dropdown-item" href="/detalleVehiculoArgos.html">ARGOS</a>
              </li>
              <li>
                <a class="dropdown-item" href="/fichaVehiculosClientes.html">
                Ficha de Vehículos x Clientes
                </a>
              </li>
            </ul>
          </li>
  
          <!-- Proveedores: enlace simple -->
          <li class="nav-item">
            <a
              class="nav-link active"
              aria-current="page"
              href="/proveedores.html"
            >
              <i class="bi bi-truck"></i>
            </a>
          </li>
  
          <!-- Inventario: enlace simple -->
          <li class="nav-item">
            <a
              class="nav-link active"
              aria-current="page"
              href="/inventario.html"
            >
              <i class="bi bi-box-seam"></i>
            </a>
          </li>
  
          <!-- Clientes: Dropdown -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle active"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <i class="bi bi-people"></i>
            </a>
            <ul class="dropdown-menu">
              <!-- Ajusta las rutas según tu proyecto -->
              <li>
                <a class="dropdown-item" href="/crearClientes.html">Crear Clientes</a>
              </li>
              <li>
                <a class="dropdown-item" href="/fichaClientes.html">Ficha de Clientes</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <div class="container-fluid my-4">
    <div class="row">
      <!-- COLUMNA IZQUIERDA: Datos del cliente y servicios -->
      <div class="col-lg-8 mb-4">
        <!-- Datos del cliente -->
        <div class="card mb-3">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <!-- Nombre y teléfono -->
              <div class="flex-grow-1 me-3">
                <h6>Nombre</h6>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="clienteNombre"
                  placeholder="Nombre"
                />
              </div>
              <div>
                <h6>Teléfono</h6>
                <input
                  type="text"
                  class="form-control"
                  id="clienteTelefono"
                  placeholder="Teléfono"
                />
              </div>
            </div>
          </div>
        </div>

        <!-- Falla o requerimiento -->
        <div class="mb-3">
          <label for="fallaRequerimiento" class="form-label"
            >Falla o Requerimiento:</label
          >
          <input
            type="text"
            class="form-control"
            id="fallaRequerimiento"
            placeholder="Descripción actual del vehículo"
          />
        </div>

        <!-- Tabla de servicios o productos -->
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">Servicios o Productos</h5>
          </div>
          <div class="card-body p-0">
            <table class="table mb-0" id="tablaServicios">
              <thead class="table-light">
                <tr>
                  <th>Servicio / Producto</th>
                  <th>Cant.</th>
                  <th>Precio U.</th>
                  <th>Subtotal</th>
                  <th style="width: 50px;"></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Nuevo servicio"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      value="1"
                      min="1"
                    />
                  </td>
                  <td>
                    <input
                      type="number"
                      class="form-control"
                      value="100"
                      min="0"
                    />
                  </td>
                  <td class="align-middle text-end">$100.00</td>
                  <td class="text-center align-middle">
                    <button class="btn btn-sm btn-danger eliminarFila">
                      <i class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="card-footer d-flex justify-content-between">
            <button id="agregarFila" class="btn btn-primary btn-sm">
              <i class="bi bi-plus-circle"></i> Agregar producto
            </button>
            <div>
              <span class="fw-bold">Total: </span>
              <span id="totalServicios">$500.00</span>
            </div>
          </div>
        </div>
      </div>

      <!-- COLUMNA DERECHA: Tabs: Vehículo / Fotos -->
      <div class="col-lg-4">
        <!-- Barra de pestañas -->
        <ul class="nav nav-tabs" id="vehTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="vehiculo-tab"
              data-bs-toggle="tab"
              data-bs-target="#vehiculoTabContent"
              type="button"
              role="tab"
              aria-controls="vehiculoTabContent"
              aria-selected="true"
            >
              Vehículo
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="fotos-tab"
              data-bs-toggle="tab"
              data-bs-target="#fotosTabContent"
              type="button"
              role="tab"
              aria-controls="fotosTabContent"
              aria-selected="false"
            >
              Fotos
            </button>
          </li>
        </ul>

        <!-- Contenido de las pestañas -->
        <div class="tab-content" id="vehTabsContent">
          <!-- TAB Vehículo -->
          <div
            class="tab-pane fade show active p-3"
            id="vehiculoTabContent"
            role="tabpanel"
            aria-labelledby="vehiculo-tab"
          >
            <div class="card">
              <div class="card-body">
                <div class="d-flex align-items-center">
                  <div>
                    <!-- Título y subtítulo del vehículo -->
                    <h6 id="vehTitle" class="mb-0"></h6>
                    <p class="mb-0 text-muted" id="vehSubtitle">
                      JNBY67 - 2021 - Gris
                    </p>
                  </div>
                  <!-- Botón Editar (abre el modal) -->
                  <button
                    class="btn btn-sm btn-outline-primary ms-auto"
                    id="btnEditarVehiculo"
                  >
                    <i class="bi bi-pencil"></i> Editar
                  </button>
                </div>
                <hr />
                <!-- Kilometraje -->
                <div class="mb-3">
                  <label class="form-label">Kilometraje actual</label>
                  <p id="vehKilometrajeDisplay" class="mb-1">51,000 Kms</p>
                </div>
                <!-- Nivel de combustible con barra de progreso -->
                <div class="mb-3">
                  <label class="form-label">Nivel de combustible</label>
                  <div class="progress progress-fuel">
                    <div
                      class="progress-bar fuel-progress-bar"
                      role="progressbar"
                      aria-valuenow="25"
                      aria-valuemin="0"
                      aria-valuemax="100"
                      id="fuelProgress"
                    >
                      25%
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- TAB Fotos -->
          <div
            class="tab-pane fade p-3"
            id="fotosTabContent"
            role="tabpanel"
            aria-labelledby="fotos-tab"
          >
            <div class="card">
              <div class="card-header">
                <h5 class="mb-0">Fotos del Vehículo</h5>
              </div>
              <div class="card-body">
                <!-- Sección Foto Antes -->
                <div class="mb-3">
                  <label for="fotoAntes" class="form-label">Foto Antes</label>
                  <!-- multiple para subir varias fotos -->
                  <input
                    class="form-control"
                    type="file"
                    id="fotoAntes"
                    multiple
                  />
                  <small class="text-muted"
                    >Puedes seleccionar varias imágenes</small
                  >
                </div>
                <div class="row preview-container" id="previewFotosAntes"></div>

                <hr />

                <!-- Sección Foto Después -->
                <div class="mb-3">
                  <label for="fotoDespues" class="form-label">Foto Después</label>
                  <input
                    class="form-control"
                    type="file"
                    id="fotoDespues"
                    multiple
                  />
                  <small class="text-muted"
                    >Puedes seleccionar varias imágenes</small
                  >
                </div>
                <div class="row preview-container" id="previewFotosDespues"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Firmas -->
    <div class="row mt-4">
      <div class="col-md-6">
        <label class="form-label fw-bold">Firma del Cliente</label>
        <div class="signature-box"></div>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-bold">Firma del Taller</label>
        <div class="signature-box"></div>
      </div>
    </div>
    <!-- Botón de Guardar / Imprimir (opcional) -->
    <div class="text-end mt-4">
      <button id="btnGuardar" class="btn btn-success">
        <i class="bi bi-check-circle"></i> Guardar / Imprimir
      </button>
    </div>
  </div>

  <!-- Modal SOLO para editar datos del vehículo -->
  <div
    class="modal fade"
    id="editVehicleModal"
    tabindex="-1"
    aria-labelledby="editVehicleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editVehicleModalLabel">Editar Vehículo</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Cerrar"
          ></button>
        </div>
        <div class="modal-body">
          <form id="editVehicleForm">
            <div class="mb-3">
              <label for="modalVehMarca" class="form-label">Marca</label>
              <input type="text" class="form-control" id="modalVehMarca" />
            </div>
            <div class="mb-3">
              <label for="modalVehModelo" class="form-label">Modelo</label>
              <input type="text" class="form-control" id="modalVehModelo" />
            </div>
            <div class="mb-3">
              <label for="modalVehAnio" class="form-label">Año</label>
              <input type="number" class="form-control" id="modalVehAnio" />
            </div>
            <div class="mb-3">
              <label for="modalVehColor" class="form-label">Color</label>
              <input type="text" class="form-control" id="modalVehColor" />
            </div>
            <div class="mb-3">
              <label for="modalVehPlaca" class="form-label">Placa</label>
              <input type="text" class="form-control" id="modalVehPlaca" />
            </div>
            <div class="mb-3">
              <label for="modalVehKilometraje" class="form-label"
                >Kilometraje</label
              >
              <input
                type="number"
                class="form-control"
                id="modalVehKilometraje"
              />
            </div>
            <div class="mb-3">
              <label for="modalVehCombustible" class="form-label"
                >Nivel de Combustible (%)</label
              >
              <input
                type="number"
                class="form-control"
                id="modalVehCombustible"
              />
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cerrar
          </button>
          <button class="btn btn-primary" id="btnGuardarVehiculo">
            Guardar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts de Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Script propio -->
  <script src="js/detallevehiculoTodos.js"></script>
</body>
</html>
